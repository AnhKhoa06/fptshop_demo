<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="img/logofpt7.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <link rel="stylesheet" href="login-style5.css" />
    <title>Đăng Nhập | Đăng Ký</title>
  </head>

  <body>
    <div class="container" id="container">
      <div class="form-container sign-up">
        <form action="register.php" method="POST">
          <h1>Create Account</h1>
          <div class="social-icons">
            <a href="javascript:void(0);" class="icon" id="google-login">
              <i class="fa-brands fa-google-plus-g"></i>
            </a>
            <a href="#" class="icon"><i class="fa-brands fa-facebook-f"></i></a>
            <a href="#" class="icon"><i class="fa-brands fa-github"></i></a>
            <a href="#" class="icon"
              ><i class="fa-brands fa-linkedin-in"></i
            ></a>
          </div>
          <span>or use your email for registration</span>
          <input type="text" name="username" placeholder="Username" required />
          <input type="email" name="email" placeholder="Email" required />
          <input type="phone" name="phone" placeholder="Phone" />
          <input
            type="password"
            name="password"
            placeholder="Password"
            required
          />
          <input
            type="password"
            name="confirm_password"
            placeholder="Confirm Password"
            required
          />
          <button type="submit" name="sign_up">Sign Up</button>
        </form>
      </div>

      <div class="form-container sign-in">
        <form action="login.php" method="POST">
          <h1>Sign In</h1>
          <div class="social-icons">
            <a href="javascript:void(0);" class="icon" id="google-login1">
              <i class="fa-brands fa-google-plus-g"></i>
            </a>
            <a href="#" class="icon"><i class="fa-brands fa-facebook-f"></i></a>
            <a href="#" class="icon"><i class="fa-brands fa-github"></i></a>
            <a href="#" class="icon"
              ><i class="fa-brands fa-linkedin-in"></i
            ></a>
          </div>
          <span>or use your email password</span>
          <input type="text" name="username" placeholder="Username" required />
          <div style="position: relative; width: 100%">
            <input
              type="password"
              name="password"
              placeholder="Password"
              required
              id="password"
              style="width: 100%; padding-right: 40px"
            />
            <i
              class="fa fa-eye-slash toggle-password"
              toggle="#password"
              style="
                position: absolute;
                top: 50%;
                right: 10px;
                transform: translateY(-50%);
                cursor: pointer;
                font-size: 14px;
              "
            ></i>
          </div>

          <button type="submit" name="login">Sign In</button>
          <a href="#">Forget Your Password?</a>
        </form>
      </div>
      <div class="toggle-container">
        <div class="toggle">
          <div class="toggle-panel toggle-left">
            <h1>Welcome Back!</h1>
            <p>Enter your personal details to use all of site features</p>
            <button class="hidden" id="login">Sign In</button>
          </div>
          <div class="toggle-panel toggle-right">
            <h1>Hello, Friend!</h1>
            <p>
              Register with your personal details to use all of site features
            </p>
            <button class="hidden" id="register">Sign Up</button>
          </div>
        </div>
      </div>
    </div>
    <script>
      document.querySelectorAll(".toggle-password").forEach(function (eyeIcon) {
        eyeIcon.addEventListener("click", function () {
          const input = document.querySelector(this.getAttribute("toggle"));
          if (input.type === "password") {
            input.type = "text";
            this.classList.remove("fa-eye-slash");
            this.classList.add("fa-eye");
          } else {
            input.type = "password";
            this.classList.remove("fa-eye");
            this.classList.add("fa-eye-slash");
          }
        });
      });
    </script>

    <script>
      document
        .querySelectorAll("#google-login, #google-login1")
        .forEach((button) => {
          button.addEventListener("click", function () {
            const clientId =
              "624818447896-jjv3o42mr5a6ov845cm2oc5fgae009fe.apps.googleusercontent.com";
            const redirectUri =
              "http://localhost/fpt_shop/fptshop_demo/google_callback.php"; // Thay bằng URL thực tế của bạn
            const scope = "openid email profile";
            const responseType = "code";

            // Chuyển hướng đến Google OAuth với response_type là code
            window.location.href = `https://accounts.google.com/o/oauth2/v2/auth?client_id=${clientId}&redirect_uri=${encodeURIComponent(
              redirectUri
            )}&response_type=${responseType}&scope=${encodeURIComponent(
              scope
            )}&access_type=offline&prompt=consent`;
          });
        });

      // Hàm xử lý callback (nếu có lỗi, sẽ không làm gì vì callback được xử lý ở server)
      window.onload = function () {
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has("error")) {
          alert(
            "Đăng nhập bằng Google thất bại: " +
              urlParams.get("error_description")
          );
        }
      };
    </script>

    <script src="script1.js"></script>
  </body>
</html>
